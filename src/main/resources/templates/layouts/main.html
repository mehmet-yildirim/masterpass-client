<html
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
    <link rel="stylesheet" href="https://bootswatch.com/4/flatly/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
            crossorigin="anonymous"></script>
    <script src="/js/mfs-client.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.blockUI/2.70/jquery.blockUI.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script>
    <script src="/js/util.js"></script>

    <link id="dark-mode" rel="stylesheet"/>

    <link rel="stylesheet" href="/css/style.css">

</head>

<body>

<header>
    <div class="navbar navbar-dark bg-dark shadow-sm">
        <div class="container header-container d-flex flex-nowrap">
            <div class="no-gutters">
                <a href="/" class="navbar-brand"><h3 class="text-white">Masterpass Client Tool</h3></a>
            </div>
            <div class="d-flex justify-content-end  no-gutters">
                <a
                        href="javascript:void()"
                        class="btn btn-primary btn-outline-info ml-auto font-weight-bold"
                        id="theme-toggler"
                        onclick="toggleTheme()"
                ></a>
            </div>
        </div>

    </div>
</header>
<main role="main">
    <section layout:fragment="content" class="container main-container">

    </section>
</main>
<script>
    const LOCAL_STORAGE_KEY = "toggle-bootstrap-theme";

    const LOCAL_META_DATA = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));

    const DARK_THEME_PATH = "https://bootswatch.com/4/darkly/bootstrap.min.css";

    const DARK_STYLE_LINK = document.getElementById("dark-mode");
    const THEME_TOGGLER = document.getElementById("theme-toggler");

    let isDark = !LOCAL_META_DATA ? true : LOCAL_META_DATA.isDark;
    // let isDark = LOCAL_META_DATA && LOCAL_META_DATA.isDark;

    // check if user has already selected dark theme earlier
    if (isDark) {
        enableDarkTheme();
    } else {
        disableDarkTheme();
    }

    function toggleTheme() {
        isDark = !isDark;
        if (isDark) {
            enableDarkTheme();
        } else {
            disableDarkTheme();
        }
        const META = {isDark};
        localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(META));
    }

    function enableDarkTheme() {
        DARK_STYLE_LINK.setAttribute("href", DARK_THEME_PATH);
        THEME_TOGGLER.innerHTML = "ðŸŒ™";
    }

    function disableDarkTheme() {
        DARK_STYLE_LINK.setAttribute("href", "");
        THEME_TOGGLER.innerHTML = "ðŸŒž";
    }
</script>
</body>
</html>
